webpackJsonp([62],{305:function(t,e,o){function a(t){o(626)}var n=o(0)(o(499),o(769),a,"data-v-00ba4d44",null);t.exports=n.exports},499:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o(31),n=o.n(a),i=o(30),m=o(13),s=o(122),r=o.n(s),d=o(32),l=o(126);o.n(l);e.default={data:function(){return{replyList:[],showContent:!1,showNoContent:!1,replyText:"",readBookId:this.$route.query.bookId,commendId:this.$route.query.commendId,readCommentInfo:"",page:0,topList:{title_1:"评论详情",title_2:"首页",link:"/"},show:!1}},directives:{TransferDom:d.a},components:{Popup:r.a},computed:n()({},o.i(m.b)(["isLogin","userInfo"])),beforeRouteLeave:function(t,e,o){this.isLogin&&"/Login"==t.path&&this.$router.go(-2),o()},methods:n()({},o.i(m.a)(["setshowLoginDate"]),{infiniteHandler:function(t){var e=this;this.page+=1,o.i(i.a)(this,{commentid:this.commendId,startPage:this.page},"/api/comm-replyInfo",function(o){200==o.returnCode&&(o.data.list.length>0?(e.replyList=e.replyList.concat(o.data.list),o.data.lastPage>e.page?t.loaded():t.complete()):t.complete())})},getCommentInfo:function(){var t=this;o.i(i.a)(this,{id:this.commendId,type:0,startPage:1},"/api/comm-getcomminfo",function(e){t.showContent=!1,200===e.returnCode?(t.readCommentInfo=e.data,t.showContent=!0):800==e.returnCode&&(t.readCommentInfo=null)})},handleReply:function(){var t=this;if(/[\ud83c-\ud83e][\udc00-\udfff]|[\u2600-\u27ff]/.test(this.replyText))this.$vux.toast.show({text:"目前不支持表情",type:"cancle"});else if(this.replyText.length>0){var e={bookid:this.readBookId,replyCommentsContent:this.replyText,userName:this.userInfo.userName,bookName:this.readCommentInfo.bookName,commentId:this.commendId,puserId:this.readCommentInfo.userId};o.i(i.a)(this,e,"/api/add-replyInfo",function(o){200===o.returnCode?(t.show=!1,t.showContent=!0,t.readCommentInfo.replyCount++,e.pseudonym=t.userInfo.pseudonym,e.userHeadPortraitURL=t.userInfo.userHeadPortraitURL,e.userGrade=t.userInfo.userGrade,e.userSex=t.userInfo.userSex,t.replyList.unshift(e),t.replyText=""):400==o.returnCode?t.$router.push({path:"/Login",query:{redirect:t.$route.path+"?bookId="+t.readBookId+"&commendId="+t.commendId}}):t.$vux.toast.text(o.msg)})}else 0==this.replyText.length?this.$vux.toast.show("不能为空!"):this.replyText.length>=100&&this.$vux.toast.show("评价太多了!")},handelLike:function(){var t=this;this.isLogin?o.i(i.a)(this,{commentId:this.readCommentInfo.id},"/api/comm-GiveThumbs",function(e){200==e.returnCode&&(0==t.readCommentInfo.isthumbs?(t.readCommentInfo.isthumbs=1,t.readCommentInfo.thumbsCount+=1):(t.readCommentInfo.thumbsCount-=1,t.readCommentInfo.isthumbs=0))}):this.setshowLoginDate(!0)},handleShow:function(){this.isLogin?this.show=!this.show:this.setshowLoginDate(!0)}}),mounted:function(){this.getCommentInfo()}}},563:function(t,e,o){e=t.exports=o(29)(!1),e.push([t.i,".book_comment_detail[data-v-00ba4d44]{overflow-x:hidden}.book_comment_detail img[data-v-00ba4d44]{vertical-align:middle}.book_comment_detail .x_reply[data-v-00ba4d44]{margin-top:.1rem;font-size:.14rem;color:#333;margin-left:.2rem}.book_comment_detail .book_comment_item[data-v-00ba4d44]{margin-top:.1rem;padding-left:.2rem;border-bottom:1px solid #efefef;overflow:hidden;width:100%}.book_comment_detail .book_comment_item .avatar[data-v-00ba4d44]{width:.52rem;height:.52rem;border-radius:50%;float:left}.book_comment_detail .book_comment_item .avatar img[data-v-00ba4d44]{width:.52rem;height:.52rem;border-radius:50%}.book_comment_detail .book_comment_item .book_comment_item_detail[data-v-00ba4d44]{float:left;margin-left:.2rem;width:2.7rem}.book_comment_detail .book_comment_item .book_comment_item_detail .i_one[data-v-00ba4d44]{color:#666;overflow:hidden}.book_comment_detail .book_comment_item .book_comment_item_detail .i_one img[data-v-00ba4d44]{width:.12rem;height:.12rem}.book_comment_detail .book_comment_item .book_comment_item_detail .i_one .grade[data-v-00ba4d44]{background-color:#74f3fe;font-size:.08rem;color:#fff;border-radius:.03rem}.book_comment_detail .book_comment_item .book_comment_item_detail .bookName[data-v-00ba4d44],.book_comment_detail .book_comment_item .book_comment_item_detail .content[data-v-00ba4d44]{font-size:.14rem}.book_comment_detail .book_comment_item .book_comment_item_detail .zhan[data-v-00ba4d44]{overflow:hidden;font-size:.12rem;margin-top:.16rem}.book_comment_detail .book_comment_item .book_comment_item_detail .zhan p[data-v-00ba4d44]{float:right;margin-right:.16rem;padding:.1rem 0}.book_comment_detail .book_comment_item .book_comment_item_detail .zhan img[data-v-00ba4d44]{width:.16rem;height:.16rem;vertical-align:middle}.book_comment_detail .book_comment_item .book_comment_item_detail .zhan span[data-v-00ba4d44]{margin-left:.05rem;margin-right:.36rem}.book_comment_detail .replyInput[data-v-00ba4d44]{width:100%;border-top:1px solid #efefef;height:.4rem;background-color:#fff;position:fixed;bottom:0;line-height:.4rem;color:#f77583;text-align:center}",""])},626:function(t,e,o){var a=o(563);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);o(51)("2661b0b1",a,!0,{})},769:function(t,e,o){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"book_comment_detail"},[a("headerComponent",{attrs:{list:t.topList}}),t._v(" "),t.showContent?a("div",{staticClass:"book_comment_item"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:t.readCommentInfo.userHeadPortraitURL,alt:""}})]),t._v(" "),a("div",{staticClass:"book_comment_item_detail"},[a("div",{staticClass:"i_one"},[a("div",{staticStyle:{float:"left"}},[a("span",{staticStyle:{"font-size":".16rem"}},[t._v(t._s(t.readCommentInfo.pseudonym))]),t._v(" "),1==t.readCommentInfo.userSex?a("img",{attrs:{src:o(121),alt:""}}):t._e(),t._v(" "),0==t.readCommentInfo.userSex?a("img",{attrs:{src:o(120),alt:""}}):t._e(),t._v(" "),a("span",{staticClass:"grade"},[t._v(" LV"+t._s(t.readCommentInfo.userGrade)+" ")])]),t._v(" "),a("div",{staticStyle:{float:"right"}},[a("span",{staticStyle:{"font-size":".12rem"}},[t._v(t._s(t._f("formatDate")(t.readCommentInfo.commentDateTime)))])])]),t._v(" "),a("p",{staticClass:"content"},[t._v(t._s(t.readCommentInfo.commentContext))]),t._v(" "),a("div",{staticClass:"zhan"},[a("p",[a("img",{attrs:{src:o(139),alt:""}}),t._v(" "),a("span",[t._v(t._s(t.readCommentInfo.replyCount))])]),t._v(" "),a("p",{on:{click:function(e){t.handelLike()}}},[0==t.readCommentInfo.isthumbs?a("img",{attrs:{src:o(140),alt:""}}):t._e(),t._v(" "),1==t.readCommentInfo.isthumbs?a("img",{attrs:{src:o(138),alt:""}}):t._e(),t._v(" "),a("span",[t._v(t._s(t.readCommentInfo.thumbsCount))])])])])]):t._e(),t._v(" "),t.showContent?a("div",[a("p",{staticClass:"x_reply"},[t._v("相关回复")]),t._v(" "),t._l(t.replyList,function(e,n){return a("div",{key:n,staticClass:"book_comment_item"},[a("div",{staticClass:"avatar"},[a("img",{staticStyle:{width:".38rem",height:".38rem"},attrs:{src:e.userHeadPortraitURL,alt:""}})]),t._v(" "),a("div",{staticClass:"book_comment_item_detail"},[a("div",{staticClass:"i_one"},[a("div",{staticStyle:{float:"left"}},[a("span",{staticStyle:{"font-size":".16rem"}},[t._v(t._s(e.pseudonym))]),t._v(" "),1==e.userSex?a("img",{attrs:{src:o(121),alt:""}}):t._e(),t._v(" "),0==e.userSex?a("img",{attrs:{src:o(120),alt:""}}):t._e(),t._v(" "),a("span",{staticClass:"grade"},[t._v(" LV"+t._s(e.userGrade)+" ")])])]),t._v(" "),a("p",{staticClass:"content"},[t._v(t._s(e.replyCommentsContent))])])])}),t._v(" "),a("infinite-loading",{on:{infinite:t.infiniteHandler}},[a("span",{attrs:{slot:"no-more"},slot:"no-more"},[t._v("\n                 目前暂无更多回复\n             ")]),t._v(" "),a("span",{attrs:{slot:"no-results"},slot:"no-results"},[t._v("\n                 目前暂无更多回复\n             ")])])],2):t._e(),t._v(" "),a("div",{staticClass:"replyInput",on:{click:function(e){t.handleShow()}}},[a("span",[t._v("回复")])]),t._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("popup",{model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("div",{staticStyle:{overflow:"hidden",height:"1.5rem","font-size":".16rem","background-color":"#fff"}},[a("div",{staticStyle:{"border-bottom":"1px solid #E9E9E9",overflow:"hidden",padding:".08rem .2rem"}},[a("p",{staticStyle:{float:"left"},on:{click:function(e){t.show=!1}}},[t._v("取消")]),t._v(" "),a("p",{staticStyle:{color:"#F77583",float:"right"},on:{click:function(e){t.handleReply()}}},[t._v("发表")])]),t._v(" "),a("div",{staticClass:"text_box"},[a("textarea",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.replyText,expression:"replyText"}],staticStyle:{width:"100%",height:"1.2rem",border:"0",outline:"none",padding:".1rem"},attrs:{placeholder:"请输入回复"},domProps:{value:t.replyText},on:{input:function(e){e.target.composing||(t.replyText=e.target.value)}}})])])])],1)],1)},staticRenderFns:[]}}});