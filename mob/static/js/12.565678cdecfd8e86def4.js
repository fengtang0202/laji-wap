webpackJsonp([12],{281:function(t,e,o){function i(t){o(565)}var a=o(0)(o(457),o(694),i,"data-v-00ba4d44",null);t.exports=a.exports},327:function(t,e,o){"use strict";function i(t){return void 0===t?document.body:"string"==typeof t&&0===t.indexOf("?")?document.body:("string"==typeof t&&t.indexOf("?")>0&&(t=t.split("?")[0]),"body"===t||!0===t?document.body:t instanceof window.Node?t:document.querySelector(t))}function a(t){if(!t)return!1;if("string"==typeof t&&t.indexOf("?")>0)try{return JSON.parse(t.split("?")[1]).autoUpdate||!1}catch(t){return!1}return!1}var n=o(46),s={inserted:function(t,e,o){var a=e.value;t.className=t.className?t.className+" v-transfer-dom":"v-transfer-dom";var n=t.parentNode,s=document.createComment(""),r=!1;!1!==a&&(n.replaceChild(s,t),i(a).appendChild(t),r=!0),t.__transferDomData||(t.__transferDomData={parentNode:n,home:s,target:i(a),hasMovedOut:r})},componentUpdated:function(t,e){var o=e.value;if(a(o)){var s=t.__transferDomData,r=s.parentNode,d=s.home,l=s.hasMovedOut;!l&&o?(r.replaceChild(d,t),i(o).appendChild(t),t.__transferDomData=n({},t.__transferDomData,{hasMovedOut:!0,target:i(o)})):l&&!1===o?(r.replaceChild(t,d),t.__transferDomData=n({},t.__transferDomData,{hasMovedOut:!1,target:i(o)})):o&&i(o).appendChild(t)}},unbind:function(t,e){t.className=t.className.replace("v-transfer-dom",""),t.__transferDomData&&!0===t.__transferDomData.hasMovedOut&&t.__transferDomData.parentNode&&t.__transferDomData.parentNode.appendChild(t),t.__transferDomData=null}};e.a=s},328:function(t,e,o){t.exports=o.p+"static/img/1.f382736.png"},329:function(t,e,o){"use strict";e.a={hasClass:function(t,e){return new RegExp("(\\s|^)"+e+"(\\s|$)").test(t.className)},addClass:function(t,e){t&&(t.classList?t.classList.add(e):this.hasClass(t,e)||(t.className+=""+e))},removeClass:function(t,e){t&&(t.classList?t.classList.remove(e):this.hasClass(t,e)&&(t.className=t.className.replace(new RegExp("(\\s|^)"+e+"(\\s|$)")," ").replace(/^\s+|\s+$/g,"")))}}},330:function(t,e,o){e=t.exports=o(43)(!1),e.push([t.i,".vux-modal-open{overflow:hidden;position:fixed;width:100%}.vux-modal-open-for-container{overflow:hidden!important}",""])},332:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(50),a=o.n(i),n=o(333),s=o(329);e.default={name:"popup",props:{value:Boolean,height:{type:String,default:"auto"},width:{type:String,default:"auto"},showMask:{type:Boolean,default:!0},isTransparent:Boolean,hideOnBlur:{type:Boolean,default:!0},position:{type:String,default:"bottom"},maxHeight:String,popupStyle:Object,hideOnDeactivated:{type:Boolean,default:!0},shouldRerenderOnShow:{type:Boolean,default:!1},shouldScrollTopOnShow:{type:Boolean,default:!1}},created:function(){this.$vux&&this.$vux.config&&"VIEW_BOX"===this.$vux.config.$layout&&(this.layout="VIEW_BOX")},mounted:function(){var t=this;this.$overflowScrollingList=document.querySelectorAll(".vux-fix-safari-overflow-scrolling"),this.$nextTick(function(){var e=t;t.popup=new n.a({showMask:e.showMask,container:e.$el,hideOnBlur:e.hideOnBlur,onOpen:function(){e.fixSafariOverflowScrolling("auto"),e.show=!0},onClose:function(){e.show=!1,window.__$vuxPopups&&a()(window.__$vuxPopups).length>1||document.querySelector(".vux-popup-dialog.vux-popup-mask-disabled")||setTimeout(function(){e.fixSafariOverflowScrolling("touch")},300)}}),t.value&&t.popup.show(),t.initialShow=!1})},deactivated:function(){this.hideOnDeactivated&&(this.show=!1),this.removeModalClassName()},methods:{fixSafariOverflowScrolling:function(t){if(this.$overflowScrollingList.length)for(var e=0;e<this.$overflowScrollingList.length;e++)this.$overflowScrollingList[e].style.webkitOverflowScrolling=t},removeModalClassName:function(){"VIEW_BOX"===this.layout&&s.a.removeClass(document.body,"vux-modal-open")},doShow:function(){this.popup&&this.popup.show(),this.$emit("on-show"),this.fixSafariOverflowScrolling("auto"),"VIEW_BOX"===this.layout&&s.a.addClass(document.body,"vux-modal-open"),this.hasFirstShow||(this.$emit("on-first-show"),this.hasFirstShow=!0)},scrollTop:function(){var t=this;this.$nextTick(function(){t.$el.scrollTop=0;var e=t.$el.querySelectorAll(".vux-scrollable");if(e.length)for(var o=0;o<e.length;o++)e[o].scrollTop=0})}},data:function(){return{layout:"",initialShow:!0,hasFirstShow:!1,shouldRenderBody:!0,show:this.value}},computed:{styles:function(){var t={};if(this.position&&"bottom"!==this.position&&"top"!==this.position?t.width=this.width:t.height=this.height,this.maxHeight&&(t["max-height"]=this.maxHeight),this.isTransparent&&(t.background="transparent"),this.popupStyle)for(var e in this.popupStyle)t[e]=this.popupStyle[e];return t}},watch:{value:function(t){this.show=t},show:function(t){var e=this;this.$emit("input",t),t?this.shouldRerenderOnShow?(this.shouldRenderBody=!1,this.$nextTick(function(){e.scrollTop(),e.shouldRenderBody=!0,e.doShow()})):(this.shouldScrollTopOnShow&&this.scrollTop(),this.doShow()):(this.$emit("on-hide"),this.show=!1,this.popup.hide(!1),setTimeout(function(){document.querySelector(".vux-popup-dialog.vux-popup-show")||e.fixSafariOverflowScrolling("touch"),e.removeModalClassName()},200))}},beforeDestroy:function(){this.popup&&this.popup.destroy(),this.fixSafariOverflowScrolling("touch"),this.removeModalClassName()}}},333:function(t,e,o){"use strict";var i=o(51),a=o.n(i),n=o(334),s="object"===("undefined"==typeof window?"undefined":a()(window));s&&(window.__$vuxPopups=window.__$vuxPopups||{});var r=function(t){var e=this;if(s){this.uuid=Math.random().toString(36).substring(3,8),this.params={},"[object Object]"===Object.prototype.toString.call(t)&&(this.params={hideOnBlur:t.hideOnBlur,onOpen:t.onOpen||function(){},onClose:t.onClose||function(){},showMask:t.showMask}),!!document.querySelectorAll(".vux-popup-mask").length<=0&&(this.divMask=document.createElement("a"),this.divMask.className="vux-popup-mask",this.divMask.dataset.uuid="",this.divMask.href="javascript:void(0)",document.body.appendChild(this.divMask));var o=void 0;o=t.container?t.container:document.createElement("div"),o.className+=" vux-popup-dialog vux-popup-dialog-"+this.uuid,this.params.hideOnBlur||(o.className+=" vux-popup-mask-disabled"),this.div=o,t.container||document.body.appendChild(o),this.container=document.querySelector(".vux-popup-dialog-"+this.uuid),this.mask=document.querySelector(".vux-popup-mask"),this.mask.dataset.uuid+=","+this.uuid,this._bindEvents(),t=null,this.containerHandler=function(){e.mask&&!/show/.test(e.mask.className)&&setTimeout(function(){!/show/.test(e.mask.className)&&(e.mask.style.zIndex=-1)},200)},this.container&&this.container.addEventListener("webkitTransitionEnd",this.containerHandler),this.container&&this.container.addEventListener("transitionend",this.containerHandler)}};r.prototype.onClickMask=function(){this.params.hideOnBlur&&this.params.onClose()},r.prototype._bindEvents=function(){this.params.hideOnBlur&&(this.mask.addEventListener("click",this.onClickMask.bind(this),!1),this.mask.addEventListener("touchmove",function(t){return t.preventDefault()},!!n&&{passive:!1}))},r.prototype.show=function(){this.params.showMask&&(this.mask.classList.add("vux-popup-show"),this.mask.style.zIndex=500),this.container.classList.add("vux-popup-show"),this.params.onOpen&&this.params.onOpen(this),s&&(window.__$vuxPopups[this.uuid]=1)},r.prototype.hide=function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.container.classList.remove("vux-popup-show"),document.querySelector(".vux-popup-dialog.vux-popup-show")||(this.mask.classList.remove("vux-popup-show"),setTimeout(function(){t.mask&&!/show/.test(t.mask.className)&&(t.mask.style.zIndex=-1)},400)),!1===e&&this.params.onClose&&this.params.hideOnBlur&&this.params.onClose(this),this.isShow=!1,s&&delete window.__$vuxPopups[this.uuid]},r.prototype.destroy=function(){this.mask.dataset.uuid=this.mask.dataset.uuid.replace(new RegExp(","+this.uuid,"g"),""),this.mask.dataset.uuid?this.hide():(this.mask.removeEventListener("click",this.onClickMask.bind(this),!1),this.mask&&this.mask.parentNode&&this.mask.parentNode.removeChild(this.mask)),this.container.removeEventListener("webkitTransitionEnd",this.containerHandler),this.container.removeEventListener("transitionend",this.containerHandler),s&&delete window.__$vuxPopups[this.uuid]},e.a=r},334:function(t,e){var o=!1;try{var i=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("test",null,i)}catch(t){}t.exports=o},335:function(t,e,o){e=t.exports=o(43)(!1),e.i(o(330),""),e.push([t.i,".vux-popup-dialog{position:fixed;left:0;bottom:0;width:100%;background:#eee;z-index:501;-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;-webkit-transition-duration:.3s;transition-duration:.3s;max-height:100%;overflow-y:scroll;-webkit-overflow-scrolling:touch}.vux-popup-dialog.vux-popup-left{width:auto;height:100%;top:0;right:auto;bottom:auto;left:0}.vux-popup-dialog.vux-popup-right{width:auto;height:100%;top:0;right:0;bottom:auto;left:auto}.vux-popup-dialog.vux-popup-top{width:100%;top:0;right:auto;bottom:auto;left:0}.vux-popup-mask{display:block;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);opacity:0;tap-highlight-color:transparent;z-index:-1;-webkit-transition:opacity .4s;transition:opacity .4s}.vux-popup-mask.vux-popup-show{opacity:1}.vux-popup-animate-bottom-enter,.vux-popup-animate-bottom-leave-active{-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}.vux-popup-animate-left-enter,.vux-popup-animate-left-leave-active{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}.vux-popup-animate-right-enter,.vux-popup-animate-right-leave-active{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}.vux-popup-animate-top-enter,.vux-popup-animate-top-leave-active{-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}",""])},336:function(t,e,o){var i=o(335);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o(44)("5e90dcb4",i,!0,{})},338:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("transition",{attrs:{name:"vux-popup-animate-"+t.position}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.show&&!t.initialShow,expression:"show && !initialShow"}],staticClass:"vux-popup-dialog",class:["vux-popup-"+t.position,t.show?"vux-popup-show":""],style:t.styles},[t.shouldRenderBody?t._t("default"):t._e()],2)])},staticRenderFns:[]}},339:function(t,e,o){function i(t){o(336)}var a=o(0)(o(332),o(338),i,null,null);t.exports=a.exports},457:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(104),a=o.n(i),n=o(45),s=o(18),r=o(339),d=o.n(r),l=o(327),m=o(122);o.n(m);e.default={data:function(){return{replyList:[],showContent:!1,showNoContent:!1,replyText:"",readBookId:this.$route.query.bookId,commendId:this.$route.query.commendId,readCommentInfo:"",page:0,topList:{title_1:"评论详情",title_2:"首页",link:"/"},show:!1,source:{img:o(328),text:"没有相关回复"}}},directives:{TransferDom:l.a},components:{Popup:d.a},computed:a()({},o.i(s.a)(["isLogin","userInfo"])),methods:{infiniteHandler:function(t){var e=this;this.page+=1,o.i(n.a)(this,{commentid:this.commendId,startPage:this.page},"/api/comm-replyInfo",function(o){200==o.returnCode&&(o.data.list.length>0?(e.replyList=e.replyList.concat(o.data.list),o.data.lastPage>e.page?t.loaded():t.complete()):t.complete())})},getCommentInfo:function(){var t=this;o.i(n.a)(this,{id:this.commendId,type:0,startPage:1},"/api/comm-getcomminfo",function(e){t.showContent=!1,200===e.returnCode&&(t.readCommentInfo=e.data,t.showContent=!0)})},handleReply:function(){var t=this;if(/[\ud83c-\ud83e][\udc00-\udfff]|[\u2600-\u27ff]/.test(this.replyText))this.$vux.toast.show({text:"目前不支持表情",type:"cancle"});else if(this.replyText.length>0){var e={bookid:this.readBookId,replyCommentsContent:this.replyText,userName:this.userInfo.userName,bookName:this.readCommentInfo.bookName,commentId:this.commendId,puserId:this.readCommentInfo.userId};o.i(n.a)(this,e,"/api/add-replyInfo",function(o){200===o.returnCode?(t.show=!1,t.showContent=!0,t.readCommentInfo.replyCount++,e.pseudonym=t.userInfo.pseudonym,e.userHeadPortraitURL=t.userInfo.userHeadPortraitURL,e.userGrade=t.userInfo.userGrade,e.userSex=t.userInfo.userSex,t.replyList.unshift(e),t.replyText=""):400==o.returnCode?t.$router.push({path:"/Login",query:{redirect:t.$route.path+"?bookId="+t.readBookId+"&commendId="+t.commendId}}):t.$vux.toast.text(o.msg)})}else 0==this.replyText.length?this.$vux.toast.show("不能为空!"):this.replyText.length>=100&&this.$vux.toast.show("评价太多了!")},handelLike:function(){var t=this;this.isLogin?o.i(n.a)(this,{commentId:this.readCommentInfo.id},"/api/comm-GiveThumbs",function(e){200==e.returnCode&&(0==t.readCommentInfo.isthumbs?(t.readCommentInfo.isthumbs=1,t.readCommentInfo.thumbsCount+=1):(t.readCommentInfo.thumbsCount-=1,t.readCommentInfo.isthumbs=0))}):this.$vux.toast.text("登录后点赞哦")},handleShow:function(){this.isLogin?this.show=!this.show:this.$router.push({path:"/Login",query:{redirect:this.$route.path+"?bookId="+this.readBookId+"&commendId="+this.commendId}})}},mounted:function(){this.getCommentInfo()}}},506:function(t,e,o){e=t.exports=o(43)(!1),e.push([t.i,".book_comment_detail[data-v-00ba4d44]{overflow-x:hidden}.book_comment_detail img[data-v-00ba4d44]{vertical-align:middle}.book_comment_detail .x_reply[data-v-00ba4d44]{margin-top:.1rem;font-size:.14rem;color:#333;margin-left:.2rem}.book_comment_detail .book_comment_item[data-v-00ba4d44]{margin-top:.1rem;padding-left:.2rem;border-bottom:1px solid #efefef;overflow:hidden;width:100%}.book_comment_detail .book_comment_item .avatar[data-v-00ba4d44]{width:.52rem;height:.52rem;border-radius:50%;float:left}.book_comment_detail .book_comment_item .avatar img[data-v-00ba4d44]{width:.52rem;height:.52rem;border-radius:50%}.book_comment_detail .book_comment_item .book_comment_item_detail[data-v-00ba4d44]{float:left;margin-left:.2rem;width:2.7rem}.book_comment_detail .book_comment_item .book_comment_item_detail .i_one[data-v-00ba4d44]{color:#666;overflow:hidden}.book_comment_detail .book_comment_item .book_comment_item_detail .i_one img[data-v-00ba4d44]{width:.12rem;height:.12rem}.book_comment_detail .book_comment_item .book_comment_item_detail .i_one .grade[data-v-00ba4d44]{background-color:#74f3fe;font-size:.08rem;color:#fff;border-radius:.03rem}.book_comment_detail .book_comment_item .book_comment_item_detail .bookName[data-v-00ba4d44],.book_comment_detail .book_comment_item .book_comment_item_detail .content[data-v-00ba4d44]{font-size:.14rem}.book_comment_detail .book_comment_item .book_comment_item_detail .zhan[data-v-00ba4d44]{overflow:hidden;font-size:.12rem;margin-top:.16rem}.book_comment_detail .book_comment_item .book_comment_item_detail .zhan p[data-v-00ba4d44]{float:right;margin-right:.16rem;padding:.1rem 0}.book_comment_detail .book_comment_item .book_comment_item_detail .zhan img[data-v-00ba4d44]{width:.16rem;height:.16rem;vertical-align:middle}.book_comment_detail .book_comment_item .book_comment_item_detail .zhan span[data-v-00ba4d44]{margin-left:.05rem;margin-right:.36rem}.book_comment_detail .replyInput[data-v-00ba4d44]{width:100%;border-top:1px solid #efefef;height:.4rem;background-color:#fff;position:fixed;bottom:0;line-height:.4rem;color:#f77583;text-align:center}",""])},565:function(t,e,o){var i=o(506);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o(44)("2661b0b1",i,!0,{})},694:function(t,e,o){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"book_comment_detail"},[i("headerComponent",{attrs:{list:t.topList}}),t._v(" "),t.showContent?i("div",{staticClass:"book_comment_item"},[i("div",{staticClass:"avatar"},[i("img",{attrs:{src:t.readCommentInfo.userHeadPortraitURL,alt:""}})]),t._v(" "),i("div",{staticClass:"book_comment_item_detail"},[i("div",{staticClass:"i_one"},[i("div",{staticStyle:{float:"left"}},[i("span",{staticStyle:{"font-size":".16rem"}},[t._v(t._s(t.readCommentInfo.pseudonym))]),t._v(" "),1==t.readCommentInfo.userSex?i("img",{attrs:{src:o(112),alt:""}}):t._e(),t._v(" "),0==t.readCommentInfo.userSex?i("img",{attrs:{src:o(111),alt:""}}):t._e(),t._v(" "),i("span",{staticClass:"grade"},[t._v(" LV"+t._s(t.readCommentInfo.userGrade)+" ")])]),t._v(" "),i("div",{staticStyle:{float:"right"}},[i("span",{staticStyle:{"font-size":".12rem"}},[t._v(t._s(t._f("formatDate")(t.readCommentInfo.commentDateTime)))])])]),t._v(" "),i("p",{staticClass:"content"},[t._v(t._s(t.readCommentInfo.commentContext))]),t._v(" "),i("div",{staticClass:"zhan"},[i("p",[i("img",{attrs:{src:o(130),alt:""}}),t._v(" "),i("span",[t._v(t._s(t.readCommentInfo.replyCount))])]),t._v(" "),i("p",{on:{click:function(e){t.handelLike()}}},[0==t.readCommentInfo.isthumbs?i("img",{attrs:{src:o(131),alt:""}}):t._e(),t._v(" "),1==t.readCommentInfo.isthumbs?i("img",{attrs:{src:o(129),alt:""}}):t._e(),t._v(" "),i("span",[t._v(t._s(t.readCommentInfo.thumbsCount))])])])])]):t._e(),t._v(" "),t.showContent?i("div",[i("p",{staticClass:"x_reply"},[t._v("相关回复")]),t._v(" "),t._l(t.replyList,function(e,a){return i("div",{key:a,staticClass:"book_comment_item"},[i("div",{staticClass:"avatar"},[i("img",{staticStyle:{width:".38rem",height:".38rem"},attrs:{src:e.userHeadPortraitURL,alt:""}})]),t._v(" "),i("div",{staticClass:"book_comment_item_detail"},[i("div",{staticClass:"i_one"},[i("div",{staticStyle:{float:"left"}},[i("span",{staticStyle:{"font-size":".16rem"}},[t._v(t._s(e.pseudonym))]),t._v(" "),1==e.userSex?i("img",{attrs:{src:o(112),alt:""}}):t._e(),t._v(" "),0==e.userSex?i("img",{attrs:{src:o(111),alt:""}}):t._e(),t._v(" "),i("span",{staticClass:"grade"},[t._v(" LV"+t._s(e.userGrade)+" ")])])]),t._v(" "),i("p",{staticClass:"content"},[t._v(t._s(e.replyCommentsContent))])])])}),t._v(" "),i("infinite-loading",{on:{infinite:t.infiniteHandler}},[i("span",{attrs:{slot:"no-more"},slot:"no-more"},[t._v("\n                 目前暂无更多回复\n             ")]),t._v(" "),i("span",{attrs:{slot:"no-results"},slot:"no-results"},[t._v("\n                 目前暂无更多回复\n             ")])])],2):t._e(),t._v(" "),i("div",{staticClass:"replyInput",on:{click:function(e){t.handleShow()}}},[i("span",[t._v("回复")])]),t._v(" "),i("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[i("popup",{model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("div",{staticStyle:{overflow:"hidden",height:"1.5rem","font-size":".16rem","background-color":"#fff"}},[i("div",{staticStyle:{"border-bottom":"1px solid #E9E9E9",overflow:"hidden",padding:".08rem .2rem"}},[i("p",{staticStyle:{float:"left"},on:{click:function(e){t.show=!1}}},[t._v("取消")]),t._v(" "),i("p",{staticStyle:{color:"#F77583",float:"right"},on:{click:function(e){t.handleReply()}}},[t._v("发表")])]),t._v(" "),i("div",{staticClass:"text_box"},[i("textarea",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.replyText,expression:"replyText"}],staticStyle:{width:"100%",height:"1.2rem",border:"0",outline:"none",padding:".1rem"},attrs:{placeholder:"请输入回复"},domProps:{value:t.replyText},on:{input:function(e){e.target.composing||(t.replyText=e.target.value)}}})])])])],1)],1)},staticRenderFns:[]}}});