webpackJsonp([45],{335:function(e,t,a){function i(e){a(659)}var o=a(0)(a(527),a(804),i,"data-v-5a1e959e",null);e.exports=o.exports},527:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(31),o=a.n(i),r=a(32),n=a(123),s=a.n(n),c=a(13),d=a(30),p=a(113),f=a(21),l=a.n(f),h=a(120);a.n(h);t.default={data:function(){return{topList:{title_1:"微信支付",title_2:"首页",link:"/"},price:6,isAddTo:0,show:!1,config:"",payCategoryList:[{price:6,gift:""},{price:12,gift:""},{price:30,gift:"送150辣椒券"},{price:50,gift:"送300辣椒券"},{price:98,gift:"送800辣椒券"},{price:198,gift:"送1800辣椒券"}]}},components:{Popup:s.a},directives:{TransferDom:r.a},computed:o()({},a.i(c.b)(["userInfo","isLogin","feedPepper"])),methods:{handelTap:function(e,t){this.isAddTo=e,this.show=!0,this.price=t},pay:function(){var e=navigator.userAgent.toLowerCase(),t={userId:this.userInfo.userId,nickName:this.userInfo.pseudonym,userPayMoney:this.price,channelId:this.userInfo.userCode,rechargeChannelId:sessionStorage.getItem("pi")||"LG20180608000"};"micromessenger"!=e.match(/MicroMessenger/i)?a.i(d.a)(this,t,"/api/WeChatPay/h5WebPayment",function(e){var t=(e.data,e.data.mweb_url+"&redirect_url="+encodeURIComponent("https://www.lajixs.com/mob/person"));window.location.replace(t)}):window.location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx0d80269db309ad18&redirect_uri="+encodeURIComponent("https://www.lajixs.com/mob/wechatPay")+"&response_type=code&scope=snsapi_base&state=wxChat"+this.price+"#wechat_redirect")},onBridgeReady:function(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:this.config.appid,timeStamp:this.config.timeStamp,nonceStr:this.config.nonceStr,package:"prepay_id="+this.config.prepayid,signType:"MD5",paySign:this.config.sign},function(e){"get_brand_wcpay_request:ok"==e.err_msg&&(this.$vux.toast.text("充值成功!"),window.location.href="https://www.lajixs.com/mob/myWallet"),e.err_msg,e.err_msg})},handleIndex:function(e){switch(e){case"6":this.isAddTo=0;break;case"12":this.isAddTo=1;break;case"30":this.isAddTo=2;break;case"50":this.isAddTo=3;break;case"98":this.isAddTo=4;break;case"198":this.isAddTo=5}},changeMoney:function(){sessionStorage.getItem("pi");"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)&&(this.payCategoryList=this.payCategoryList.slice(1))}},mounted:function(){var e=this;if(this.isLogin&&(this.changeMoney(),a.i(p.b)(),window.location.href.indexOf("state=wxChat")>0)){var t="";window.location.href.split("?")[1].split("&").forEach(function(a){"code"==a.split("=")[0]&&(t=a.split("=")[1]),"state"==a.split("=")[0]&&(e.price=a.split("=")[1].substring(6),e.handleIndex(e.price))}),l.a.get("/api/WeChatPay/getWeChatOpenid?code="+t).then(function(t){var i=t.data.data.openid;l.a.get("/api/WeChatPay/wxPublicNumberPay?userId="+e.userInfo.userId+"&openid="+i+"&nickName="+e.userInfo.pseudonym+"&channelId="+e.userInfo.userCode+"&rechargeChannelId="+(sessionStorage.getItem("pi")||"LG20180608000")+"&userPayMoney="+e.price).then(function(t){e.config=t.data.data,e.onBridgeReady();var i=0,o=setInterval(function(){i+=1,l.a.get("/api/WeChatPay/getPayResultInfo?out_trade_no="+e.config.out_trade_no).then(function(t){200===t.data.returnCode&&1==t.data.data.isOK&&e.$router.go(-3)}),5==i&&a.i(h.clearInterval)(o)},2e3)})})}}}},596:function(e,t,a){t=e.exports=a(29)(!1),t.push([e.i,".wechat[data-v-5a1e959e]{width:100%;color:#333;font-size:.16rem}.wechat .pay_category_wrap[data-v-5a1e959e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:distribute;justify-content:space-around;-ms-flex-wrap:wrap;flex-wrap:wrap;padding:.3rem .1rem}.wechat .pay_category_wrap .pay_category[data-v-5a1e959e]{width:1.06rem;height:1.06rem;text-align:center;border:.01rem solid #fb5e6f;border-radius:.05rem;position:relative;margin-top:.3rem;padding-top:.3rem;overflow:hidden}.wechat .pay_category_wrap .pay_category .gift[data-v-5a1e959e]{font-size:.12rem;color:#fb5e6f}.wechat .pay_category_wrap .pay_category .icon[data-v-5a1e959e]{font-size:.1rem;position:absolute;right:-.2rem;top:-.17rem;width:.6rem;height:.15rem;-webkit-transform:rotate(45deg);transform:rotate(45deg);-webkit-transform-origin:left bottom;transform-origin:left bottom;color:#fff;background-color:#fb5e6f}.wechat .pay_category_wrap .isAdd[data-v-5a1e959e]{background-color:#fb5e6f;color:#fff}.wechat .pay_category_wrap .isAdd .gift[data-v-5a1e959e]{color:#fff}",""])},659:function(e,t,a){var i=a(596);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(51)("88a27bc8",i,!0,{})},804:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("keep-alive",[a("div",{staticClass:"wechat"},[a("headerComponent",{attrs:{list:e.topList}}),e._v(" "),a("div",{staticClass:"pay_category_wrap"},e._l(e.payCategoryList,function(t,i){return a("div",{key:i,staticClass:"pay_category",class:{isAdd:e.isAddTo===i},on:{click:function(a){e.handelTap(i,t.price)}}},[a("p",{staticClass:"price"},[e._v(e._s(t.price+"元"))]),e._v(" "),a("p",{staticClass:"price"},[e._v(e._s(100*t.price+"小辣椒"))]),e._v(" "),a("p",{staticClass:"gift"},[e._v(e._s(t.gift))]),e._v(" "),!t.gift?e._e():a("span",{staticClass:"icon"},[e._v("赠送")])])})),e._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("popup",{staticStyle:{height:"2rem"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("div",{staticClass:"popup"},[a("p",{staticStyle:{color:"#FB5E6F","font-size":".28rem","text-align":"center",margin:".13rem 0"}},[e._v("¥"+e._s(e.price))]),e._v(" "),a("div",{staticStyle:{overflow:"hidden","border-bottom":"1px solid #EFEFEF"}},[a("p",{staticStyle:{color:"#666666","font-size":".16rem",float:"left","margin-left":".14rem"}},[e._v("可用余额:"+e._s(e.feedPepper))]),e._v(" "),a("p",{staticStyle:{color:"#4A90E2","font-size":".12rem",float:"right","margin-right":".14rem"}},[e._v("每充值20元送1个金椒")])]),e._v(" "),a("p",{staticStyle:{"text-align":"center","margin-top":".1rem"}},[a("button",{staticStyle:{border:"0",outline:"none","background-color":"#F77582",width:"80%",height:".4rem","border-radius":".4rem",color:"#fff"},on:{click:function(t){e.pay()}}},[e._v("立即支付")])])])])],1)],1)])},staticRenderFns:[]}}});